{"ast":null,"code":"import _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport React, { useEffect } from 'react';\nimport Router from 'next/router';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { addUser, logoutUser } from '../../../store/actions/userActions';\nimport Data from '../../../../env';\nimport useAuth from '../../../hooks/checkAuth';\nimport './styles/buttons.scss';\n\nvar GitHubLoginButton = function GitHubLoginButton() {\n  //get user information if logged in\n  var url = \"\".concat(Data.baseAPIEndpoint, \"/auth/login/success\");\n\n  var _useAuth = useAuth(url),\n      _useAuth2 = _slicedToArray(_useAuth, 2),\n      theseProps = _useAuth2[0],\n      loading = _useAuth2[1];\n\n  var dispatch = useDispatch(); //if user logs in send user to the store  \n\n  useEffect(function () {\n    if (theseProps && theseProps.user) {\n      dispatch(addUser(theseProps.user));\n    }\n  }, [theseProps]);\n  var button; //on logout remove user from store and push to logout auth on backend\n\n  var onClick = function onClick(e) {\n    e.preventDefault();\n    dispatch(logoutUser());\n    Router.push(\"\".concat(Data.baseAPIEndpoint, \"/auth/logout\"));\n  }; //get user from store if there is one\n\n\n  var userState = useSelector(function (state) {\n    return state;\n  });\n\n  if (userState.isAuthenticated) {\n    button = React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"githubbuttondiv\",\n      onClick: onClick\n    }, \"Logout\"));\n  } else if (theseProps && theseProps.user) {\n    button = React.createElement(\"div\", {\n      className: \"githubbuttondiv\",\n      onClick: onClick\n    }, \"Logout\");\n  } else {\n    button = React.createElement(\"a\", {\n      href: \"\".concat(Data.baseAPIEndpoint, \"/auth/github\"),\n      className: \"githubbutton\"\n    }, React.createElement(\"div\", {\n      className: \"githubbuttondiv\"\n    }, React.createElement(\"img\", {\n      src: \"../../static/git-hub.png\",\n      className: \"img-git\"\n    }), \"Login With GitHub\"));\n  }\n\n  return React.createElement(\"div\", {\n    style: {\n      paddingTop: '.4rem'\n    }\n  }, button);\n};\n\nexport default GitHubLoginButton;","map":{"version":3,"sources":["C:\\Users\\Tom\\Desktop\\Express Projects\\current\\stackyourpropsboiler\\frontend\\src\\user\\usercomponents\\buttons\\GitHubLoginButton.tsx"],"names":["React","useEffect","Router","useSelector","useDispatch","addUser","logoutUser","Data","useAuth","GitHubLoginButton","url","baseAPIEndpoint","theseProps","loading","dispatch","user","button","onClick","e","preventDefault","push","userState","state","isAuthenticated","paddingTop"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAEA,SAASC,OAAT,EAAkBC,UAAlB,QAAoC,oCAApC;AACA,OAAOC,IAAP,MAAiB,iBAAjB;AACA,OAAOC,OAAP,MAAoB,0BAApB;AAIA,OAAO,uBAAP;;AAOA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAC5B;AACA,MAAMC,GAAW,aAAMH,IAAI,CAACI,eAAX,wBAAjB;;AAF4B,iBAGEH,OAAO,CAACE,GAAD,CAHT;AAAA;AAAA,MAGrBE,UAHqB;AAAA,MAGTC,OAHS;;AAI5B,MAAMC,QAAa,GAAGV,WAAW,EAAjC,CAJ4B,CAK5B;;AACAH,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIW,UAAU,IAAIA,UAAU,CAACG,IAA7B,EAAmC;AAC/BD,MAAAA,QAAQ,CAACT,OAAO,CAACO,UAAU,CAACG,IAAZ,CAAR,CAAR;AACH;AACJ,GAJQ,EAKH,CAACH,UAAD,CALG,CAAT;AAMA,MAAII,MAAJ,CAZ4B,CAa5B;;AACA,MAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,CAAD,EAAO;AACnBA,IAAAA,CAAC,CAACC,cAAF;AACAL,IAAAA,QAAQ,CAACR,UAAU,EAAX,CAAR;AACAJ,IAAAA,MAAM,CAACkB,IAAP,WAAeb,IAAI,CAACI,eAApB;AACH,GAJD,CAd4B,CAmB5B;;;AACA,MAAMU,SAAqB,GAAGlB,WAAW,CAAC,UAAAmB,KAAK;AAAA,WAAIA,KAAJ;AAAA,GAAN,CAAzC;;AACA,MAAID,SAAS,CAACE,eAAd,EAA+B;AAC3BP,IAAAA,MAAM,GACF,0CACI;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAiC,MAAA,OAAO,EAAEC;AAA1C,gBADJ,CADJ;AAOH,GARD,MAQO,IAAIL,UAAU,IAAIA,UAAU,CAACG,IAA7B,EAAmC;AACtCC,IAAAA,MAAM,GACF;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAiC,MAAA,OAAO,EAAEC;AAA1C,gBADJ;AAKH,GANM,MAMA;AACHD,IAAAA,MAAM,GACF;AAAG,MAAA,IAAI,YAAKT,IAAI,CAACI,eAAV,iBAAP;AAAgD,MAAA,SAAS,EAAC;AAA1D,OACI;AAAK,MAAA,SAAS,EAAC;AAAf,OACI;AAAK,MAAA,GAAG,EAAC,0BAAT;AAAoC,MAAA,SAAS,EAAC;AAA9C,MADJ,sBADJ,CADJ;AAOH;;AACD,SACI;AAAK,IAAA,KAAK,EAAE;AAAEa,MAAAA,UAAU,EAAE;AAAd;AAAZ,KACKR,MADL,CADJ;AAKH,CAjDD;;AAmDA,eAAeP,iBAAf","sourcesContent":["import React, { useEffect } from 'react';\r\nimport Router from 'next/router'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport { addUser, logoutUser } from '../../../store/actions/userActions'\r\nimport Data from '../../../../env'\r\nimport useAuth from '../../../hooks/checkAuth'\r\n\r\nimport UserInterface from '../../../interfaces/UserInterface'\r\n\r\nimport './styles/buttons.scss'\r\n\r\ninterface theseProps {\r\n    user: UserInterface;\r\n    isAuthenticated: boolean;\r\n\r\n}\r\nconst GitHubLoginButton = () => {\r\n    //get user information if logged in\r\n    const url: string = `${Data.baseAPIEndpoint}/auth/login/success`\r\n    const [theseProps, loading] = useAuth(url)\r\n    const dispatch: any = useDispatch()\r\n    //if user logs in send user to the store  \r\n    useEffect(() => {\r\n        if (theseProps && theseProps.user) {\r\n            dispatch(addUser(theseProps.user))\r\n        }\r\n    }\r\n        , [theseProps]);\r\n    let button;\r\n    //on logout remove user from store and push to logout auth on backend\r\n    const onClick = (e) => {\r\n        e.preventDefault()\r\n        dispatch(logoutUser())\r\n        Router.push(`${Data.baseAPIEndpoint}/auth/logout`)\r\n    }\r\n    //get user from store if there is one\r\n    const userState: theseProps = useSelector(state => state)\r\n    if (userState.isAuthenticated) {\r\n        button = (\r\n            <>\r\n                <div className='githubbuttondiv' onClick={onClick} >\r\n                    Logout\r\n                </div>\r\n            </>\r\n        )\r\n    } else if (theseProps && theseProps.user) {\r\n        button = (\r\n            <div className='githubbuttondiv' onClick={onClick} >\r\n                Logout\r\n                </div>\r\n        )\r\n    } else {\r\n        button = (\r\n            <a href={`${Data.baseAPIEndpoint}/auth/github`} className='githubbutton'>\r\n                <div className='githubbuttondiv'>\r\n                    <img src='../../static/git-hub.png' className='img-git' />Login With GitHub\r\n                </div>\r\n            </a >\r\n        )\r\n    }\r\n    return (\r\n        <div style={{ paddingTop: '.4rem' }}>\r\n            {button}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GitHubLoginButton;"]},"metadata":{},"sourceType":"module"}