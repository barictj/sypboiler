{"ast":null,"code":"import _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Data from '../../env';\n\nvar checkAuth = function checkAuth(url) {\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  useEffect(function () {\n    if (url) {\n      fetch(\"\".concat(Data.baseAPIEndpoint, \"/auth/login/success\"), {\n        method: \"GET\",\n        credentials: \"include\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Credentials\": true // \"Cookie\": 'theseralkjdfasdoifthe'\n\n        }\n      }).then(function (response) {\n        if (response.status === 200) return response.json();\n        throw new Error(\"failed to authenticate user\");\n      }).then(function (responseJson) {\n        setData({\n          authenticated: true,\n          user: responseJson.user\n        });\n        setLoading(false);\n      }).catch(function (error) {\n        setData({\n          authenticated: false,\n          error: \"Failed to authenticate user\"\n        });\n      });\n    }\n  }, [url]);\n  return [data, loading];\n};\n\nexport default checkAuth;","map":{"version":3,"sources":["C:\\Users\\Tom\\Desktop\\Express Projects\\current\\stackyourpropsboiler\\frontend\\src\\hooks\\checkAuth.jsx"],"names":["React","useState","useEffect","axios","Data","checkAuth","url","data","setData","loading","setLoading","fetch","baseAPIEndpoint","method","credentials","headers","Accept","then","response","status","json","Error","responseJson","authenticated","user","catch","error"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,WAAjB;;AACA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,GAAD,EAAS;AAAA,kBACCL,QAAQ,EADT;AAAA;AAAA,MAChBM,IADgB;AAAA,MACVC,OADU;;AAAA,mBAEOP,QAAQ,CAAC,IAAD,CAFf;AAAA;AAAA,MAEhBQ,OAFgB;AAAA,MAEPC,UAFO;;AAGvBR,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAII,GAAJ,EAAS;AACLK,MAAAA,KAAK,WAAIP,IAAI,CAACQ,eAAT,0BAA+C;AAChDC,QAAAA,MAAM,EAAE,KADwC;AAEhDC,QAAAA,WAAW,EAAE,SAFmC;AAGhDC,QAAAA,OAAO,EAAE;AACLC,UAAAA,MAAM,EAAE,kBADH;AAEL,0BAAgB,kBAFX;AAGL,8CAAoC,IAH/B,CAIL;;AAJK;AAHuC,OAA/C,CAAL,CAUKC,IAVL,CAUU,UAAAC,QAAQ,EAAI;AACd,YAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B,OAAOD,QAAQ,CAACE,IAAT,EAAP;AAC7B,cAAM,IAAIC,KAAJ,CAAU,6BAAV,CAAN;AACH,OAbL,EAcKJ,IAdL,CAcU,UAAAK,YAAY,EAAI;AAElBd,QAAAA,OAAO,CAAC;AACJe,UAAAA,aAAa,EAAE,IADX;AAEJC,UAAAA,IAAI,EAAEF,YAAY,CAACE;AAFf,SAAD,CAAP;AAIAd,QAAAA,UAAU,CAAC,KAAD,CAAV;AACH,OArBL,EAsBKe,KAtBL,CAsBW,UAAAC,KAAK,EAAI;AACZlB,QAAAA,OAAO,CAAC;AACJe,UAAAA,aAAa,EAAE,KADX;AAEJG,UAAAA,KAAK,EAAE;AAFH,SAAD,CAAP;AAIH,OA3BL;AA4BH;AACJ,GA/BQ,EAgCH,CAACpB,GAAD,CAhCG,CAAT;AAiCA,SAAO,CAACC,IAAD,EAAOE,OAAP,CAAP;AACH,CArCD;;AAuCA,eAAeJ,SAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Data from '../../env'\r\nconst checkAuth = (url) => {\r\n    const [data, setData] = useState();\r\n    const [loading, setLoading] = useState(true);\r\n    useEffect(() => {\r\n        if (url) {\r\n            fetch(`${Data.baseAPIEndpoint}/auth/login/success`, {\r\n                method: \"GET\",\r\n                credentials: \"include\",\r\n                headers: {\r\n                    Accept: \"application/json\",\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Access-Control-Allow-Credentials\": true,\r\n                    // \"Cookie\": 'theseralkjdfasdoifthe'\r\n                }\r\n            })\r\n                .then(response => {\r\n                    if (response.status === 200) return response.json();\r\n                    throw new Error(\"failed to authenticate user\");\r\n                })\r\n                .then(responseJson => {\r\n\r\n                    setData({\r\n                        authenticated: true,\r\n                        user: responseJson.user\r\n                    });\r\n                    setLoading(false)\r\n                })\r\n                .catch(error => {\r\n                    setData({\r\n                        authenticated: false,\r\n                        error: \"Failed to authenticate user\"\r\n                    });\r\n                });\r\n        }\r\n    }\r\n        , [url]);\r\n    return [data, loading];\r\n};\r\n\r\nexport default checkAuth"]},"metadata":{},"sourceType":"module"}